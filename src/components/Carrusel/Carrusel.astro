---
import "@splidejs/splide/css";
import { getMergedInfo } from "@services/githubAPI";
import { type RepositoryInfo } from "@services/githubAPI";
import Button from "@components/Button/Button.astro";
import Icon from "@components/Icon/Icon.astro";
import Card from "@components/Card/Card.astro";
import SkillIcon from "@components/SkillIcon/SkillIcon.astro";

const repositories = await getMergedInfo();

const born = new Date("July 30, 2001 00:00:00"); //fecha de nacimiento
const now = new Date(); //Fecha actual
const mounth = now.getMonth(); //Mes actual
const day = now.getDate(); //Dia actual
const hour = now.getHours(); //Hora actual
const monthDiff = now.getMonth() - born.getMonth(); //Diferencia en meses
let Bday: boolean = false; //Indica si es cumpleaños
let edad: number;

if (
  mounth === born.getMonth() &&
  day === born.getDate() &&
  hour === born.getHours()
) {
  Bday = true;
}

if (monthDiff > 0 || Bday) {
  edad = now.getFullYear() - born.getFullYear();
} else {
  edad = now.getFullYear() - born.getFullYear() - 1;
}
---

<div class="splide" role="group">
  <div class="splide__track">
    <ul class="splide__list">
      <li class="splide__slide">
        <div id="sobre-mi" class="pb-12 text-white">
          <h1 class="text-xl font-bold">Sobre mi</h1>
          <div class="@container flex flex-col items-center justify-center">
            <p class="w-[75cqw] mt-6 text-xl text-justify">
              ¡Hola! Me llamo Lautaro Rodriguez Brown, tengo {edad} años y soy desarrollador
              de software residente en la Ciudad Autónoma de Buenos Aires, Argentina.
              <br />
              Me apasiona aprender nuevas tecnologías y afrontar desafíos que impulsen
              mi crecimiento profesional. Me especializo en lenguajes como C, Java,
              Javascript, Python, entre otros. Me destaco por ser una persona organizada,
              puntual, responsable y comprometida. Trabajo de manera eficiente en
              equipo, adaptándome rápidamente a nuevos paradigmas y enfoques. Mi
              objetivo es contribuir a proyectos innovadores, ofreciendo soluciones
              creativas y efectivas.
              <br />
              <br />
              <br />
              Fuera de la programación, me gusta complementar mis conocimientos con
              otras áreas de la informática, como lo es el mantenimiento y reparación
              de computadoras. En lo personal, soy una persona que disfruta practicar
              deportes, pasar tiempo con amigos y relajarme con actividades como
              ver series o películas.
            </p>
          </div>
        </div>
      </li>
      <li class="splide__slide">
        <div id="formacion" class="pb-12 text-white">
          <h1 class="text-xl font-bold">Formación</h1>
          {(
            <div class="inline-grid grid-cols-3 gap-4 mt-6">
              <Card title="Secundaria" cardtype={false}>
              </Card>
              <Card title="Terciario" cardtype={false}>
              </Card>
              <Card title="Tic" cardtype={false}>
              </Card>
            </div>
          )}
        </div>
      </li>
      <li class="splide__slide">
        <div id="proyectos" class="pb-12 text-white">
          <h1 class="text-xl font-bold">Últimos 4 proyectos</h1>
          <div class="inline-grid grid-cols-2 grid-rows-2 gap-4 mt-6">
            {
              repositories.map((repository: RepositoryInfo) => (
                <a href={repository.html_url}>
                  <Card title={repository.name}>
                    {repository.description}
                    <br />
                    <SkillIcon
                      iconUrl={repository.languages?.map(
                        (language: string) => language
                      )}
                      size={7}
                    />
                  </Card>
                </a>
              ))
            }
          </div>
        </div>
      </li>
      <li class="splide__slide">
        <div id="contacto" class="pb-12 text-white text-center">
          <h1 class="text-xl font-bold mb-6">Contacto</h1>

          <div class="inline-grid gap-4 items-center justify-center">
            <Button name="Gmail" link="mailto:lautanba@gmail.com">
              <Icon name="Gmail" icon="/Gmail_Icon.svg" />
            </Button>

            <Button
              name="LinkedIn"
              link="https://www.linkedin.com/in/lautaro-rodriguez-brown-7294b9257/"
            >
              <Icon name="LinkedIn" icon="/Linkedin_Icon.svg" />
            </Button>

            <Button name="Github" link="https://github.com/LautaRB">
              <Icon name="Github" icon="/Github_Icon.svg" />
            </Button>
          </div>
        </div>
      </li>
    </ul>

    <script src="@ts/carrusel.ts"></script>
  </div>
</div>
